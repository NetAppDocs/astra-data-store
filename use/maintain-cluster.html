<!DOCTYPE html>
<html lang="en">
  <head class="at-element-marker">
  <title>Manage the Astra Data Store cluster</title>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1">
  <meta http-equiv="language" content="en">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:title" content="Manage the Astra Data Store cluster" />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="https://docs.netapp.com/us-en/astra-data-store/use/maintain-cluster.html" />
	<meta property="og:description" content="You can maintain the cluster by using kubectl commands with Astra Data Store." />
  <meta property="og:image" content="https://docs.netapp.com/us-en/astra-data-store/images/logo-tophat-social.png" />
  <meta property="og:image:alt" content="NetApp Logo" />
  <meta name="format-detection" content="telephone=no">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="encoding" content="utf-8">
  <meta http-equiv="nss-type" content="Product Documentation"/>
  <meta http-equiv="nss-subtype" content="User Guide"/><meta name="description" content="You can maintain the cluster by using kubectl commands with Astra Data Store.">
  <meta name="keywords" content=" astra, astra data store, kubectl"><!-- Icons -->
  <link rel="icon" href="/us-en/astra-data-store/images/favicon.ico" type="image/x-icon">

  <!-- RSS Feed --><!-- CSS Definitions: NetApp CSS should be defined after generic css -->

  <!-- Elastic Search -->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/searchkit/0.10.0/theme.css">

  <!-- Controls AsciiDoctor Admonition Blocks -->
  <link rel="stylesheet" type="text/css" href="/us-en/astra-data-store/css/font-awesome.min.css">

  <!-- Controls the shadow effect for search dropdown menu -->
  <link rel="stylesheet" href="/us-en/astra-data-store/css/boxshadowproperties.css">

  <!-- NetApp CSS controls the technical content -->
  <link rel="stylesheet" type="text/css" href="/us-en/astra-data-store/css/netapp.css">

  <!-- WWW CSS Content -->
  <link rel="stylesheet" type="text/css" href="/us-en/astra-data-store/css/www-luci-dotcom.min.css">
  <link rel="stylesheet" type="text/css" href="/us-en/astra-data-store/css/www-netapp-dotcom.css">
  <link rel="stylesheet" href="/us-en/astra-data-store/css/www-netapp-library-critical.min.css" media="all" >
  <link rel="stylesheet" href="/us-en/astra-data-store/css/www-netapp-library-non-critical.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="stylesheet" href="/us-en/astra-data-store/css/www-netapp-library-global-header-footer.min.css">

  <!-- NetApp IE Customizations -->
  <link rel="stylesheet" href='/us-en/astra-data-store/css/na-utility.css' type='text/css'>
  <link rel="stylesheet" href='/us-en/astra-data-store/css/na-sidebar.css' type='text/css'>
  <link rel='stylesheet' href='/us-en/astra-data-store/css/clouddocs.css' type='text/css'>
  <link rel='stylesheet' href='/us-en/astra-data-store/css/custom-dropdown.css' type='text/css'>
  <link rel='stylesheet' href='/us-en/astra-data-store/css/na-pagenav.css' type='text/css'>

  
  <link rel="stylesheet" href="/us-en/astra-data-store/css/landing-page.css" type="text/css">
  <link rel="stylesheet" href="/us-en/astra-data-store/css/tabbed-blocks.css" type="text/css">
  <!-- Canonical url -->
  <link rel='stylesheet' href='/us-en/astra-data-store/css/na-feature.css' type='text/css'><!-- Top level site integrations --><script>
    if (document.location.hostname === "docs.netapp.com") {
      var head = document.getElementsByTagName('head')[0];
      var onetrustConsent = document.createElement("script");
      onetrustConsent.type = "text/javascript";
      onetrustConsent.src = "https://cdn.cookielaw.org/consent/72570c5c-fe30-465f-b0e0-b77f7fb4ae34/OtAutoBlock.js";
      head.appendChild(onetrustConsent);

      var onetrustScript = document.createElement("script");
      onetrustScript.type = "text/javascript";
      onetrustScript.src = "https://cdn.cookielaw.org/scripttemplates/otSDKStub.js";
      onetrustScript.charset = "UTF-8";
      onetrustScript.dataset.documentLanguage = "true";
      onetrustScript.dataset.domainScript = "72570c5c-fe30-465f-b0e0-b77f7fb4ae34";
      head.appendChild(onetrustScript);
    }

    function OptanonWrapper() { }

    if (document.location.hostname === "docs.netapp.com") {
      var adobe = document.createElement("script");
      adobe.type = "text/plain";
      adobe.className = "optanon-category-C0002";
      adobe.src = "//assets.adobedtm.com/60287eadf1ee/c284da483c83/launch-e9ff3acac59f.min.js";
      head.appendChild(adobe);

      var google = document.createElement("script");
      google.type = "text/plain";
      google.className = "optanon-category-C0002";
      google.src = "https://www.googletagmanager.com/gtag/js?id=UA-81697994-3";
      head.appendChild(google);

      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-81697994-3');
    }
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>

  <!-- Used for Product Family Page Sidebar Visibility --><!-- Used to import Promise for IE. Required for SearchKit -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bluebird/3.3.5/bluebird.min.js"></script><script src='/us-en/astra-data-store/js/na-search.js'></script><script src='/us-en/astra-data-store/js/na-pagenav.js'></script><link rel='stylesheet' href='/us-en/astra-data-store/css/prism.css' type='text/css'>
  <link rel='stylesheet' href='/us-en/astra-data-store/css/prism-netapp.css' type='text/css'>


  <script src='/us-en/astra-data-store/js/na-utility.js'></script>
  <script src='/us-en/astra-data-store/js/clouddocs.js'></script>
  <script src='/us-en/astra-data-store/js/jquery.navgoco.min.js'></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script src='/us-en/astra-data-store/js/toc.js'></script>
  <script src='/us-en/astra-data-store/js/customscripts.js'></script><script>
      $(document).ready(function() {
          
          var collapseOnInit = true;
          

          var navSettings = {
              "caretHtml": '',
              "accordion": collapseOnInit,
              "openClass": 'active', // open
              "save": false, // leave false or nav highlighting doesn't work right
              "cookie": {
                  "name": 'navgoco',
                  "expires": false,
                  "path": '/'
              },
              "slide": {
                  "duration": 400,
                  "easing": 'swing'
              }
          };

          // Initialize navgoco with default options
          $("#mysidebar").navgoco(navSettings);
          

          $("#collapseAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', false);
          });

          $("#expandAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', true);
          });

      });

  </script>
  <script>
      $(document).ready(function() {
          $("#tg-sb-link").click(function() {
              $("#tg-sb-sidebar").toggle();
              $("#tg-sb-content").toggleClass('col-md-9');
              $("#tg-sb-content").toggleClass('col-md-12');
              $("#tg-sb-icon").toggleClass('fa-toggle-on');
              $("#tg-sb-icon").toggleClass('fa-toggle-off');
          });
      });
  </script>
  <script src='/us-en/astra-data-store/js/custom-dropdown.js'></script>
  <script src='/us-en/astra-data-store/js/FileSaver.min.js'></script>
  <script src='/us-en/astra-data-store/js/jszip-utils.min.js'></script>
  <script src='/us-en/astra-data-store/js/jszip.min.js'></script>
  <script src='/us-en/astra-data-store/js/pdf-ux.js'></script>
</head>


  <body class role="document" data-flavor="">
    <div id="page" class="n-off-canvas-menu">
      <div class="n-off-canvas-menu__menu"><!--TODO: Add offcanvas code --></div>
      <div class="n-off-canvas-menu__content-wrap">
        <header class="site-header" id="banner">
  
  <!-- Start Page Toolbar -->
  
  <div class="page-nav-toolbar"><div class="page-nav-contribute"><a target="_blank" href="https://github.com/NetAppDocs/astra-data-store/issues/new?body=Page%3A%20[Manage the Astra Data Store cluster](https://docs.netapp.com/us-en/astra-data-store/use/maintain-cluster.html)" class="page-nav-contribute-link" role="button"><img src="/us-en/astra-data-store/images/discuss-sm.svg" class="github-icon" />Request doc changes</a><a target="_blank" href="https://github.com/NetAppDocs/astra-data-store/blob/main/use/maintain-cluster.adoc" class="page-nav-contribute-link" role="button"><img src="/us-en/astra-data-store/images/edit-sm.svg" class="github-icon" />Edit this page</a><a target="_blank" href="https://docs.netapp.com/us-en/contribute/" class="page-nav-contribute-link"  ><img src="/us-en/astra-data-store/images/article-sm.svg" class="github-icon" />Learn how to contribute</a></div>
    <div class="page-nav-container">
      <nav class="page-nav-fixed">
        <div class="page-nav-title">ON THIS PAGE</div>
        <div class="page-nav-links">
          <ul class="page-nav-inner" id="page-menu"></ul>
        </div>
      </nav>
    </div>
  </div>
  
  
  <!-- Start top_hat -->
  <div class="n-top-hat">
    <div class="n-container">
      <div class="n-top-hat__cross-property-nav">
        <ul class="n-top-hat__list">
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/products-a-z/" class="n-top-hat__link">Product and Solutions</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/support-and-training/netapp-university/" class="n-top-hat__link">Support and Training</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://cloud.netapp.com" class="n-top-hat__link">Cloud Central</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://community.netapp.com/" class="n-top-hat__link">Community</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://blog.netapp.com/" class="n-top-hat__link">Blog</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://customers.netapp.com/en/" class="n-top-hat__link">Customer Stories</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/us/contact-us/index.aspx" target="_self" class="n-top-hat__link" data-ntap-ui="contact-us">Contact</a>
          </li>
        </ul>
      </div>
      <div class="n-top-hat__utils">
        <ul class="n-top-hat__list">
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/us/contact-us/index.aspx" target="_self" class="n-top-hat__link" data-ntap-ui="contact-us">Contact</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <!-- End top_hat -->

  <!-- Start property bar -->
  <style>
    .n-property-navigation-bar__menus--desktop-experience .n-menu--mega__default-content__heading span {
    color: #34B0FF;
    }
  </style>
  <div class="n-property-bar " data-ntap-ui="sticky-nav">
    <div class="n-property-bar__inner-wrap">
      <div class="n-property-bar__menu-toggle">
        <a href="#" class="n-property-bar__menu-toggle-link">
          <span class="n-property-bar__menu-toggle-text">Menu</span>
          <svg class="n-icon-bars n-property-bar__menu-toggle-icon" aria-labelledby="title">
            <title>bars</title>
            <use xlink:href="/us-en/astra-data-store/common/svg/sprite.svg#bars"></use>
          </svg>
        </a>
      </div>
      <div class="n-property-bar__property-mark ">
        <a href="https://www.netapp.com" class="n-property-bar__property-link">
          <div class="n-property-bar__logo">
            <svg class="n-icon-netapp-mark n-icon-netapp-mark n-property-bar__netapp-mark-icon" aria-labelledby="title">
              <title>netapp-mark</title>
              <use xlink:href="/us-en/astra-data-store/common/svg/sprite.svg#netapp-mark"></use>
            </svg>
            <svg class="n-icon-netapp-logo n-property-bar__logo-svg" aria-labelledby="title">
              <title>netapp-logo</title>
              <use xlink:href="/us-en/astra-data-store/common/svg/sprite.svg#netapp-logo"></use>
            </svg>
          </div>
        </a>
      </div>

      
      <div class="search-property-bar">
        <div id="search-demo-container" class="searchbox n-property-bar__search">
          <div id="react-search" 
          data-search-html="/us-en/astra-data-store/search.html"
          data-type="widget" 
          data-placeholder="Search Documentation" 
          data-no-results-found="No results were found for {query}" 
          data-did-you-mean="Search for {suggestion}." 
          data-no-results-found-did-you-mean="No results found for {query}. Did you mean {suggestion}?" 
          data-results-found="{hitCount} results found"  
          data-sk-es-pf-indexes=""
          data-flavor=""></div>
          <button class="n-property-bar__search-toggle-button" type="button">
            <svg class="n-icon-search n-property-bar__search-toggle-button-icon" aria-labelledby="title">
              <title>search</title>
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/astra-data-store/common/svg/sprite.svg#search"></use>
            </svg>
          </button>
        </div>
      </div>
      
    </div>
  </div>
  <div class="n-property-bar__toolbar">
    <!-- Start Language Selector --><div id="ie-i18n" class="n-property-bar__lang-selector">
      <div id="ie-i18n-menu">
      <span class="ie-i18n-lang">English</span>
        <button class="ie-i18n-icon-container" type="button">
          <svg class="n-globe__icon" aria-labelledby="title">
            <title>globe</title>
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/astra-data-store/common/svg/sprite.svg#globe"></use>
          </svg>
        </button>
      </div>
      <div id="n-property-navigation-bar__menu--language-selector" class="ie-i18n-results-container n-menu n-menu--v3 n-menu--is-active" style="display: none;">
        <div class="n-language-selector-menu">
          <ul class="n-menu__list">
            <li class="n-menu__list-column">
              <ul class="n-menu__list"><li class="n-menu__list-item n-menu__list-item--level-1">
                  <a href="https://docs.netapp.com/us-en/astra-data-store/use/maintain-cluster.html" class="n-menu__header-text"><span translate="no" class="notranslate">English</span></a>
                </li><li class="n-menu__list-item n-menu__list-item--level-1">
                  <a href="https://docs.netapp.com/ja-jp/astra-data-store/use/maintain-cluster.html" class="n-menu__header-text"><span translate="no" class="notranslate">日本語</span></a>
                </li><li class="n-menu__list-item n-menu__list-item--level-1">
                  <a href="https://docs.netapp.com/ko-kr/astra-data-store/use/maintain-cluster.html" class="n-menu__header-text"><span translate="no" class="notranslate">한국어</span></a>
                </li><li class="n-menu__list-item n-menu__list-item--level-1">
                  <a href="https://docs.netapp.com/zh-cn/astra-data-store/use/maintain-cluster.html" class="n-menu__header-text"><span translate="no" class="notranslate">简体中文</span></a>
                </li><li class="n-menu__list-item n-menu__list-item--level-1">
                  <a href="https://docs.netapp.com/zh-tw/astra-data-store/use/maintain-cluster.html" class="n-menu__header-text"><span translate="no" class="notranslate">繁體中文</span></a>
                </li></ul>
            </li>
          </ul>
        </div>
      </div>
    </div><!-- End Language Selector -->

    <div class="n-property-bar__cta"></div>
  </div>
  <script>
    $(function(){
        var currentLocalization = $('html').attr('lang');

        var localizationsDictionary = {
            "en-CA" : "https://www.netapp.com/search/index.aspx?for_cr=canada&",
            "en-IN" : "https://www.netapp.com/search/index.aspx?for_cr=india&",
            "nl-NL" : "https://www.netapp.com/search/index.aspx?for_cr=netherlands&",
            "ru-RU" : "https://www.netapp.com/search/index.aspx?for_cr=russia&",
            "sv-SE" : "https://www.netapp.com/search/index.aspx?for_cr=sweden&",
            "it-IT" : "https://www.netapp.com/search/index.aspx?for_cr=italy&",
            "he-IL" : "https://www.netapp.com/search/index.aspx?for_cr=israel&",
            "ko-KR" : "https://www.netapp.com/search/index.aspx?for_cr=korea&",
            "zh-TW" : "https://www.netapp.com/search/index.aspx?for_cr=taiwan&",
            "en-GB" : "https://www.netapp.com/search/index.aspx?for_cr=unitedkingdom&",
            "en-SG" : "https://www.netapp.com/search/index.aspx?for_cr=asean&",
            "en-AU" : "https://www.netapp.com/search/index.aspx?for_cr=australia&",
            "pt-BR" : "https://www.netapp.com/search/index.aspx?for_cr=brasil&",
            "de-CH" : "https://www.netapp.com/search/index.aspx?for_cr=switzerland&",
            "es-MX" : "https://www.netapp.com/search/index.aspx?for_cr=mexico&"
        };

        if($('html').hasClass('ntap-whitelisted') && localizationsDictionary.hasOwnProperty(currentLocalization)) {
            $('.n-property-bar__property-link').attr('href', '/');
        }
    });
  </script>
  <!-- End property bar -->
</header>


        <main id="n-main-content" class="n-main-content">
          <!-- Start Documentation Content -->
<div class="ie-main">
  <!-- Sidebar Column -->
  
  <div class="col-md-3" id="sidebar-height">
      <div class="n-pdf-header">
  <a id="toggleButtonPdf" class="n-pdf-button" type="button">
    <img src="/us-en/astra-data-store/images/pdf.png" width="16" height="16"/>Available PDFs<span>
    </span>
  </a>
</div>
<div class="n-pdf-body-container">
  <ul id="toggleContainerPdf" class="n-pdf-body" style="display:none;"><li class="pdf-ux-container">
        
        
        
        <a target="_blank" href="/us-en/astra-data-store/pdfs/fullsite-sidebar/Astra_Data_Store_documentation.pdf" >
          <img src="/us-en/astra-data-store/images/pdf.png" width="16" height="16"/>PDF of this doc site</a>



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/astra-data-store/pdfs/sidebar/Release_notes.pdf" 
            
          >
            <img src="/us-en/astra-data-store/images/pdf.png" width="16" height="16"/>
            Release notes
          </a>
          







          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/astra-data-store/pdfs/sidebar/Concepts.pdf" 
            
          >
            <img src="/us-en/astra-data-store/images/pdf.png" width="16" height="16"/>
            Concepts
          </a>
          











          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/astra-data-store/pdfs/sidebar/Get_started.pdf" 
            
          >
            <img src="/us-en/astra-data-store/images/pdf.png" width="16" height="16"/>
            Get started
          </a>
          













          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/astra-data-store/pdfs/sidebar/Use_Astra_Data_Store.pdf" 
            
          >
            <img src="/us-en/astra-data-store/images/pdf.png" width="16" height="16"/>
            Use Astra Data Store
          </a>
          




    <ul class="subfolders" style="display:none;"><li class="active pdf-hide">
  <a target="_blank" href="/us-en/astra-data-store/pdfs/pages/use/maintain-cluster.pdf" >
    <img src="/us-en/astra-data-store/images/pdf.png" width="16" height="16"/>
    PDF of this page
  </a>
</li>

</ul>
  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/astra-data-store/pdfs/sidebar/Monitor_Astra_Data_Store.pdf" 
            
          >
            <img src="/us-en/astra-data-store/images/pdf.png" width="16" height="16"/>
            Monitor Astra Data Store
          </a>
          







          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/astra-data-store/pdfs/sidebar/Secure_Astra_Data_Store.pdf" 
            
          >
            <img src="/us-en/astra-data-store/images/pdf.png" width="16" height="16"/>
            Secure Astra Data Store
          </a>
          





          
        </li>
      </ul>
    

  









          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/astra-data-store/pdfs/sidebar/Use_Astra_Data_Store_with_VMware.pdf" 
            
          >
            <img src="/us-en/astra-data-store/images/pdf.png" width="16" height="16"/>
            Use Astra Data Store with VMware
          </a>
          













          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/astra-data-store/pdfs/sidebar/Knowledge_and_support.pdf" 
            
          >
            <img src="/us-en/astra-data-store/images/pdf.png" width="16" height="16"/>
            Knowledge and support
          </a>
          







          
        </li>
      </ul>
    

  






</li></ul>
  <div class="zip-pdf-link-container" style="display: none;">   
    <a href="#" id="zipPdf">
      <img src="/us-en/astra-data-store/images/pdf-zip.png" width="16" height="16"/>
      <pre>Collection of separate PDF docs<span class="zip-size"></span></pre>
    </a><div id="zip-link-popup" class="hide">
    <div class="inner-modal">
        <div class="downloading-progress">
            <div class="spinner"></div>
            <h1>Creating your file...</h1>
            <div>This may take a few minutes. Thanks for your patience.</div>
            <button class="cancel-download-btn" type="button">Cancel</button>
        </div>
        <div class="download-complete hide">
            <div class="done-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"/></svg>
            </div>
            <div>Your file is ready</div>
            <button class="cancel-download-btn" type="button">OK</button>
        </div>
    </div>
</div>
<script>
    $(".cancel-download-btn").click(function(){
        $("#zip-link-popup").addClass("hide");
        $("#zip-link-popup .downloading-progress").removeClass("hide");
        $("#zip-link-popup .download-complete").addClass("hide");
    });
</script></div>
</div>
<script>
  $("#toggleContainerPdf li.active:last-child").parents('ul.subfolders').toggle('display');
  $("#toggleButtonPdf").click(function () {
    $("#toggleContainerPdf").toggle('display');
    $(".n-pdf-body-container .zip-pdf-link-container").toggle('display');
  });
</script><div class="sidebar-nav-container">
  <ul id="mysidebar" class="nav"><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/index.html">
        Astra Data Store docs
      </a></li><li class="subfolders "><a href="/us-en/astra-data-store/release-notes/rn_overview.html">
        <div class="na-navbar-padding"> Release notes</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/release-notes/whats-new.html">
        What's new in this release of Astra Data Store
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/release-notes/known-issues.html">
        Known issues
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/release-notes/known-limitations.html">
        Known limitations
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Concepts</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/concepts/intro.html">
        Learn about Astra Data Store
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/concepts/architecture.html">
        Deployment models
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/concepts/expansion.html">
        Cluster expansion
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/concepts/storage-efficiency.html">
        Storage efficiency
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/concepts/security.html">
        Security
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Get started</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/get-started/requirements.html">
        Astra Data Store requirements
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/get-started/quick-start.html">
        Quick start for Astra Data Store
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/get-started/install-ads.html">
        Install Astra Data Store
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/get-started/setup-ads.html">
        Set up Astra Data Store components
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/get-started/capabilities.html">
        Astra Data Store limits
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/get-started/faq-ads.html">
        FAQ
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Use Astra Data Store</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/use/kubectl-commands-ads.html">
        Manage Astra Data Store resources
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/use/deploy-apps.html">
        Deploy a test application
      </a></li><li class="  active "><a class="na-navbar-padding" href="/us-en/astra-data-store/use/maintain-cluster.html">
        Manage the cluster
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Monitor Astra Data Store</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/use/monitor-with-cloud-insights.html">
        Monitor metrics with Cloud Insights
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/use/monitor-with-prometheus-grafana.html">
        Monitor metrics with Prometheus and Grafana
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/use/configure-endpoints.html">
        Configure and monitor event logs
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Secure Astra Data Store</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/use/manage-certificates.html">
        Manage security certificates
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/use/manage-keys.html">
        Manage external keys
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/use/update-ads-license.html">
        Update the Astra Data Store license
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/use/upgrade-ads.html">
        Upgrade Astra Data Store
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/use/uninstall-ads.html">
        Uninstall Astra Data Store
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Use Astra Data Store with VMware</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/use-vmware/use-ads-vmware-overview.html">
        Learn about Astra Data Store with VMware
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/use-vmware/ads-vmware-requirements.html">
        Astra Data Store with VMware requirements
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/use-vmware/setup-ads-vmware.html">
        Set up Astra Data Store with VMware
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/use-vmware/monitor-ads-vmware.html">
        Monitor components of your VMware installation
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/use-vmware/manage-ads-vmware.html">
        Manage Astra Data Store components of your VMware installation
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/use-vmware/uninstall-ads-vmware.html">
        Uninstall Astra Data Store from a VMware-integrated environment
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Knowledge and support</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/support/troubleshooting-ads.html">
        Troubleshooting
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/support/get-help-ads.html">
        Get help
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/support/autosupport.html">
        Automatic support monitoring
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/ads-earlier-versions.html">
        Earlier versions
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/astra-data-store/legal-notices.html">
        Legal notices
      </a></li></ul>
</div>
<script>
  window.onscroll = () => {
    const value = -40 - (document.body.scrollHeight - (window.innerHeight + document.scrollingElement.scrollTop));
    
    document.getElementById("sidebar-height").style.bottom = Math.max(0,value) + "px";
};
</script>
<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>


  </div>
  

  <div class="ie-content-pane n-doc__component-detail-content n-doc__component-detail-content--show-code">
    <!-- Begin of page container --><article class="page-content">
      <div class="ie-utility">
  <div class="ie-menu">
    <div class="n-breadcrumb">
      <ul class="n-breadcrumb__list">
        <li class="n-breadcrumb__list-item">
          <a href="https://docs.netapp.com">docs.netapp.com</a>
        </li>
        

        
        <li class="n-breadcrumb__list-item">
          <a href="https://docs.netapp.com/us-en/astra-family/">Astra</a>
        </li>
        

        <li class="n-breadcrumb__list-item">
          <a href="/us-en/astra-data-store/">Astra&nbsp;Data&nbsp;Store</a>
        </li>

      </ul>
    </div>
    <div style="clear: both"></div><!-- Main needs to have height -->
  </div>
</div>

      <div class="n-doc__component-detail-heading-wrap">
  <h1 class="n-doc__component-detail-heading">Manage the Astra Data Store cluster</h1>
</div>


<p class="page-details">
  
    
    <time datetime="2022-05-25 21:50:32 +0000">05/25/2022</time>
    
  

<span>Contributors
  <a target="_blank" class="ext-link-indicator" href="https://github.com/netapp-mwallis">
    <img  class="avatar avatar-small"
          alt="netapp-mwallis"
          width="20" height="20"
          src="https://avatars.githubusercontent.com/u/53353653?v=4"
          style="border-radius: 50%;"/>
  </a>
  
  <a target="_blank" class="ext-link-indicator" href="https://github.com/amgrissino">
    <img  class="avatar avatar-small"
          alt="amgrissino"
          width="20" height="20"
          src="https://avatars.githubusercontent.com/u/36450105?v=4"
          style="border-radius: 50%;"/>
  </a>
  
  <a target="_blank" class="ext-link-indicator" href="https://github.com/netapp-dbagwell">
    <img  class="avatar avatar-small"
          alt="netapp-dbagwell"
          width="20" height="20"
          src="https://avatars.githubusercontent.com/u/53352450?v=4"
          style="border-radius: 50%;"/>
  </a>
  
</span>


</p>

<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>You can manage the cluster by using kubectl commands with Astra Data Store.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#add-a-node">Add a node</a></p>
</li>
<li>
<p><a href="#remove-a-node">Remove a node</a></p>
</li>
<li>
<p><a href="#place-a-node-in-maintenance-mode">Place a node in maintenance mode</a></p>
</li>
<li>
<p><a href="#add-drives-to-a-node">Add drives to a node</a></p>
</li>
<li>
<p><a href="#replace-a-drive">Replace a drive</a></p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">What you&#8217;ll need</div>
<ul>
<li>
<p>System with kubectl and kubectl-astrads plugin installed. See <a href="../get-started/install-ads.html">Install Astra Data Store</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-a-node">Add a node</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The node that you are adding should be part of the Kubernetes cluster and should have a configuration that is similar to the other nodes in the cluster.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/astra-data-store/images/note.svg" alt="Note">
</td>
<td class="content">
To add a node using Astra Control Center, see <a href="https://docs.netapp.com/us-en/astra-control-center/use/manage-backend.html" target="_blank" rel="noopener">Add nodes to a storage backend cluster</a>.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p>If the new node’s dataIP is not already part of the Astra Data Store cluster CR, do the following:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Edit the cluster CR and add the additional dataIP in the <code>adsDataNetworks</code> <strong>addresses</strong> field. Replace the information in capital letters with the appropriate values for your environment:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl edit astradscluster CLUSTER_NAME -n astrads-system</code></pre>
</div>
</div>
<div class="paragraph">
<p>Response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>adsDataNetworks:
    -addresses:  dataIP1,dataIP2,dataIP3,dataIP4,NEW_DATA_IP</pre>
</div>
</div>
</li>
<li>
<p>Save the CR.</p>
</li>
<li>
<p>Add the node to the Astra Data Store cluster. Replace the information in capital letters with the appropriate values for your environment:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl astrads nodes add --cluster CLUSTER_NAME</code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Otherwise, just add the nodes. Replace the information in capital letters with the appropriate values for your environment:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl astrads nodes add --cluster CLUSTER_NAME</code></pre>
</div>
</div>
</li>
<li>
<p>Verify that the node has been added:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl astrads nodes list</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="remove-a-node">Remove a node</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use kubectl commands with Astra Data Store to remove a node in a cluster.</p>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p>List all the nodes:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl astrads nodes list</code></pre>
</div>
</div>
<div class="paragraph">
<p>Response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>NODE NAME           NODE STATUS    CLUSTER NAME
sti-rx2540-534d...  Added       cluster-multinodes-21209
sti-rx2540-535d...  Added       cluster-multinodes-21209
...</pre>
</div>
</div>
</li>
<li>
<p>Mark the node for removal. Replace the information in capital letters with the appropriate values for your environment:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl astrads nodes remove NODE_NAME</code></pre>
</div>
</div>
<div class="paragraph">
<p>Response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Removal label set on node sti-rx2540-534d.lab.org
Successfully updated ADS cluster cluster-multinodes-21209 desired node count from 4 to 3</pre>
</div>
</div>
<div class="paragraph">
<p>After you mark the node for removal, the node status should change from <code>active</code> to <code>present</code>.</p>
</div>
</li>
<li>
<p>Verify the <code>present</code> status of the removed node:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl get nodes --show-labels</code></pre>
</div>
</div>
<div class="paragraph">
<p>Response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>NAME                                            STATUS   ROLES                  AGE     VERSION   LABELS
sti-astramaster-050.lab.org   Ready    control-plane,master   3h39m   v1.20.0   beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/arch=amd64,kubernetes.io/hostname=sti-astramaster-050.lab.org,kubernetes.io/os=linux,node-role.kubernetes.io/control-plane=,node-role.kubernetes.io/master=
sti-rx2540-556a.lab.org       Ready    worker                 3h38m   v1.20.0   astrads.netapp.io/cluster=astrads-cluster-890c32c,astrads.netapp.io/storage-cluster-status=active,beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/arch=amd64,kubernetes.io/hostname=sti-rx2540-556a.lab.org,kubernetes.io/os=linux,node-role.kubernetes.io/worker=true
sti-rx2540-556b.lab.org       Ready    worker                 3h38m   v1.20.0   astrads.netapp.io/cluster=astrads-cluster-890c32c,astrads.netapp.io/storage-cluster-status=active,beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/arch=amd64,kubernetes.io/hostname=sti-rx2540-556b.lab.org,kubernetes.io/os=linux,node-role.kubernetes.io/worker=true
sti-rx2540-534d.lab.org       Ready    worker                 3h38m   v1.20.0   astrads.netapp.io/storage-cluster-status=present,astrads.netapp.io/storage-node-removal=,beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/arch=amd64,kubernetes.io/hostname=sti-rx2540-557a.lab.org,kubernetes.io/os=linux,node-role.kubernetes.io/worker=true
sti-rx2540-557b.lab.org       Ready    worker                 3h38m   v1.20.0   astrads.netapp.io/cluster=astrads-cluster-890c32c,astrads.netapp.io/storage-cluster-status=active,beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/arch=amd64,kubernetes.io/hostname=sti-rx2540-557b.lab.org,kubernetes.io/os=linux,node-role.kubernetes.io/worker=true</pre>
</div>
</div>
</li>
<li>
<p>Uninstall Astra Data Store from the node. Replace the information in capital letters with the appropriate values for your environment:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl astrads nodes uninstall NODE_NAME</code></pre>
</div>
</div>
</li>
<li>
<p>Verify the node is removed from the cluster:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl astrads nodes list</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Result</div>
<p>The node is removed from Astra Data Store.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="place-a-node-in-maintenance-mode">Place a node in maintenance mode</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you need to perform host maintenance or package upgrades, you should place the node in maintenance mode.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/astra-data-store/images/note.svg" alt="Note">
</td>
<td class="content">
The node must already be part of the Astra Data Store cluster.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When a node is in maintenance mode, you cannot add a node to the cluster. In this example, we will place node <code>nhcitjj1525</code> into maintenance mode.</p>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p>Display the node details:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl get nodes</code></pre>
</div>
</div>
<div class="paragraph">
<p>Response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre> NAME             STATUS   ROLES                  AGE     VERSION
 nhcitjj1525      Ready    &lt;none&gt;                 3d18h   v1.20.0
 nhcitjj1526      Ready    &lt;none&gt;                 3d18h   v1.20.0
 nhcitjj1527      Ready    &lt;none&gt;                 3d18h   v1.20.0
 nhcitjj1528      Ready    &lt;none&gt;                 3d18h   v1.20.0
 scs000039783-1   Ready    control-plane,master   3d18h   v1.20.0</pre>
</div>
</div>
</li>
<li>
<p>Ensure that the node is not already in maintenance mode:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl astrads maintenance list</code></pre>
</div>
</div>
<div class="paragraph">
<p>Response (there are no nodes already in maintenance mode):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>NAME    NODE NAME  IN MAINTENANCE  MAINTENANCE STATE       MAINTENANCE VARIANT</pre>
</div>
</div>
</li>
<li>
<p>Enable maintenance mode. Replace the information in capital letters with the appropriate values for your environment:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl astrads maintenance create CR_NAME --node-name=NODE_NAME --variant=Node</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl astrads maintenance create maint1 --node-name="nhcitjj1525" --variant=Node</code></pre>
</div>
</div>
<div class="paragraph">
<p>Response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Maintenance mode astrads-system/maint1 created</pre>
</div>
</div>
</li>
<li>
<p>List the nodes:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl astrads nodes list</code></pre>
</div>
</div>
<div class="paragraph">
<p>Response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>NODE NAME       NODE STATUS     CLUSTER NAME
nhcitjj1525     Added           ftap-astra-012
...</pre>
</div>
</div>
</li>
<li>
<p>Check the status of the maintenance mode:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl astrads maintenance list</code></pre>
</div>
</div>
<div class="paragraph">
<p>Response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>NAME    NODE NAME       IN MAINTENANCE  MAINTENANCE STATE       MAINTENANCE VARIANT
node4   nhcitjj1525     true            ReadyForMaintenance     Node</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>In Maintenance</code> mode starts as <code>false</code> and changes to <code>true</code>.<br>
The <code>Maintenance State</code> changes from <code>PreparingForMaintenance</code> to <code>ReadyforMaintenance</code>.</p>
</div>
</li>
<li>
<p>After the node maintenance is complete, disable maintenance mode:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl astrads maintenance update maint1 --node-name="nhcitjj1525" --variant=None</code></pre>
</div>
</div>
</li>
<li>
<p>Ensure that the node is no longer in maintenance mode:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl astrads maintenance list</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-drives-to-a-node">Add drives to a node</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use kubectl commands with Astra Data Store to add physical or virtual drives to a node in an Astra Data Store cluster.</p>
</div>
<div class="ulist">
<div class="title">What you&#8217;ll need</div>
<ul>
<li>
<p>One or more drives that meet the following criteria:</p>
<div class="ulist">
<ul>
<li>
<p>Already installed in the node (physical drives) or added to the node VM (virtual drives)</p>
</li>
<li>
<p>No partitions on the drive</p>
</li>
<li>
<p>Drive is not currently in use by the cluster</p>
</li>
<li>
<p>Drive raw capacity does not exceed licensed raw capacity in the cluster (For example, with a license granting 2TB of storage per CPU core, a cluster of 10 nodes would have a maximum of 20TB raw drive capacity)</p>
</li>
<li>
<p>Drive is at least the size of other active drives in the node</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/astra-data-store/images/note.svg" alt="Note">
</td>
<td class="content">
Astra Data Store requires no more than 16 drives per node. If you try to add a 17th drive, the drive add request is denied.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p>Describe the cluster:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl astrads clusters list</code></pre>
</div>
</div>
<div class="paragraph">
<p>Response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>CLUSTER NAME                    CLUSTER STATUS  NODE COUNT
cluster-multinodes-21209        created         4</pre>
</div>
</div>
</li>
<li>
<p>Note the cluster name.</p>
</li>
<li>
<p>Show the drives that are available to add to all nodes in the cluster. Replace CLUSTER_NAME with the name of your cluster:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl astrads drives adddrive show-available --cluster=CLUSTER_NAME</code></pre>
</div>
</div>
<div class="paragraph">
<p>Response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Node: node1.name
Add drive maximum size: 100.0 GiB
Add drive minimum size: 100.0 GiB
NAME IDPATH SERIAL PARTITIONCOUNT SIZE ALREADYINCLUSTER
sdg /dev/disk/by-id/scsi-3c290e16d52479a9af5eac c290e16d52479a9af5eac 0 100 GiB false
sdh /dev/disk/by-id/scsi-3c2935798df68355dee0be c2935798df68355dee0be 0 100 GiB false

Node: node2.name
Add drive maximum size: 66.7 GiB
Add drive minimum size: 100.0 GiB
No suitable drives to add exist.

Node: node3.name
Add drive maximum size: 100.0 GiB
Add drive minimum size: 100.0 GiB
NAME IDPATH SERIAL PARTITIONCOUNT SIZE ALREADYINCLUSTER
sdg /dev/disk/by-id/scsi-3c29ee82992ed7a36fc942 c29ee82992ed7a36fc942 0 100 GiB false
sdh /dev/disk/by-id/scsi-3c29312aa362469fb3da9c c29312aa362469fb3da9c 0 100 GiB false

Node: node4.name
Add drive maximum size: 66.7 GiB
Add drive minimum size: 100.0 GiB
No suitable drives to add exist.</pre>
</div>
</div>
</li>
<li>
<p>Do one of the following:</p>
<div class="ulist">
<ul>
<li>
<p>If all available drives have the same name, you can add them to the respective nodes simultaneously. Replace the information in capital letters with the appropriate values for your environment:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl astrads drives adddrive create --cluster=CLUSTER_NAME --name REQUEST_NAME --drivesbyname all=DRIVE_NAME</code></pre>
</div>
</div>
</li>
<li>
<p>If the drives are named differently, you can add them to the respective nodes one at a time (you&#8217;ll need to repeat this step for each drive you need to add). Replace the information in capital letters with the appropriate values for your environment:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl astrads drives adddrive create --cluster=CLUSTER_NAME --name REQUEST_NAME --drivesbyname NODE_NAME=DRIVE_NAME</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Result</div>
<p>Astra Data Store creates a request to add the drive or drives, and a message appears with the result of the request.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="replace-a-drive">Replace a drive</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When a drive fails in a cluster, the drive must be replaced as soon as possible to ensure data integrity.<br>
If a drive fails, you can see information about the failed drive in cluster CR node status, cluster health condition information, and the metrics endpoint. You can use the following example commands to see failed drive information.</p>
</div>
<div class="listingblock">
<div class="title">Example of cluster showing failed drive in nodeStatuses.driveStatuses</div>
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl get adscl -A -o yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>Response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>...
apiVersion: astrads.netapp.io/v1alpha1
kind: AstraDSCluster
...
nodeStatuses:
  - driveStatuses:
    - driveID: 31205e51-f592-59e3-b6ec-185fd25888fa
      driveName: scsi-36000c290ace209465271ed6b8589b494
      drivesStatus: Failed
    - driveID: 3b515b09-3e95-5d25-a583-bee531ff3f31
      driveName: scsi-36000c290ef2632627cb167a03b431a5f
      drivesStatus: Active
    - driveID: 0807fa06-35ce-5a46-9c25-f1669def8c8e
      driveName: scsi-36000c292c8fc037c9f7e97a49e3e2708
      drivesStatus: Active
...</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Example of new AstraDSFailedDrive CR</div>
<p>The failed drive CR is created automatically in the cluster with a name corresponding to the UUID of the failed drive.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl get adsfd -A -o yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>Response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>...
apiVersion: astrads.netapp.io/v1alpha1
kind: AstraDSFailedDrive
metadata:
    name: c290a-5000-4652c-9b494
    namespace: astrads-system
spec:
  executeReplace: false
  replaceWith: ""
 status:
   cluster: arda-6e4b4af
   failedDriveInfo:
     failureReason: AdminFailed
     inUse: false
     name: scsi-36000c290ace209465271ed6b8589b494
     path: /dev/disk/by-id/scsi-36000c290ace209465271ed6b8589b494
     present: true
     serial: 6000c290ace209465271ed6b8589b494
     node: sti-rx2540-300b.lab.org
   state: ReadyToReplace</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl astrads faileddrive list --cluster arda-6e4b4af</code></pre>
</div>
</div>
<div class="paragraph">
<p>Response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>NAME       NODE                             CLUSTER        STATE                AGE
6000c290   sti-rx2540-300b.lab.netapp.com   ard-6e4b4af    ReadyToReplace       13m</pre>
</div>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p>List possible replacement drives with the <code>kubectl astrads faileddrive show-replacements</code> command, which filters drives that fit replacement restrictions (unused in cluster, not mounted, no partitions, and equal or larger than failed drive).</p>
<div class="paragraph">
<p>To list all drives without filtering possible replacement drives, add <code>--all</code> to <code>show-replacements</code> command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl astrads faileddrive show-replacements --cluster ard-6e4b4af --name 6000c290</code></pre>
</div>
</div>
<div class="paragraph">
<p>Response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>NAME  IDPATH             SERIAL  PARTITIONCOUNT   MOUNTED   SIZE
sdh   /scsi-36000c29417  45000c  0                false     100GB</pre>
</div>
</div>
</li>
<li>
<p>Use the <code>replace</code> command to replace the drive with the passed serial number. The command completes the replacement or fails if <code>--wait</code> time elapses.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl astrads faileddrive replace --cluster arda-6e4b4af --name 6000c290 --replaceWith 45000c --wait
Drive replacement completed successfully</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/astra-data-store/images/note.svg" alt="Note">
</td>
<td class="content">
If <code>kubectl astrads faileddrive replace</code> is executed using an inappropriate <code>--replaceWith</code> serial number, an error appears similar to this:
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl astrads replacedrive replace --cluster astrads-cluster-f51b10a --name 6000c2927 --replaceWith BAD_SERIAL_NUMBER
Drive 6000c2927 replacement started
Failed drive 6000c2927 has been set to use BAD_SERIAL_NUMBER as a replacement
...
Drive replacement didn't complete within 25 seconds
Current status: {FailedDriveInfo:{InUse:false Present:true Name:scsi-36000c2 FiretapUUID:444a5468 Serial:6000c Path:/scsi-36000c FailureReason:AdminFailed Node:sti-b200-0214a.lab.netapp.com} Cluster:astrads-cluster-f51b10a State:ReadyToReplace Conditions:[{Message: "Replacement drive serial specified doesn't exist", Reason: "DriveSelectionFailed", Status: False, Type:' Done"]}</code></pre>
</div>
</div>
</li>
<li>
<p>To re-run drive replacement use <code>--force</code> with the previous command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl astrads replacedrive replace --cluster astrads-cluster-f51b10a --name 6000c2927 --replaceWith VALID_SERIAL_NUMBER --force</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="for-more-information">For more information</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="../use/kubectl-commands-ads.html">Manage Astra Data Store resources with kubectl commands</a></p>
</li>
</ul>
</div>
</div>
</div>

    </article>
    <!-- Page Container -->
  </div>

  <div style="clear: both"></div><!-- Main needs to have height --></div>

        </main>

        <footer class="n-footer">
  <div class="n-footer__bottom">
    <div class="n-container">
      <div class="n-footer__bottom-left">
        <div class="n-footer__copyright">
          <ul class="n-footer__copyright-list">
            <li class="n-footer__copyright-link">
              <a href="https://www.netapp.com/us/legal/copyright.aspx">© 2022 NetApp, Inc.</a>
            </li>
            <li class="n-footer__copyright-link">
              <a href="https://www.netapp.com/company/legal/terms-of-use/">Terms of Use</a>
            </li>
            <li class="n-footer__copyright-link">
              <a href="https://www.netapp.com/company/legal/privacy-policy/">Privacy Policy</a>
            </li>
            <li class="n-footer__copyright-link">
              <a href="https://www.netapp.com/company/legal/cookie-policy/">Cookie Policy</a>
            </li>
            <li class="n-footer__copyright-link">
              <a class="ot-sdk-show-settings">Cookie Settings</a>
            </li>
          </ul>
        </div>
      </div>
      <div class="n-footer__bottom-right">
        <div class="n-footer__copyright">
          <ul class="n-footer__copyright-list">
            <li class="n-footer__copyright-link">
              <span class="n-footer__fine-print">Have feedback for our website?</span>
              <a target="_self" href="javascript:netapp_mailto()">Let us know</a>
            </li>
            <li class="n-footer__copyright-link">
              <a href="https://docs.netapp.com/us-en/announcements/">Announcements</a>
            </li>
          </ul>
        </div>
        <div class="n-footer__social-links">
          <ul class="n-footer__social-link-list">
            <li class="n-footer__social-link-list-item">
              <a class="n-footer__social-link" data-ntap-social="follow-blog" href="https://blog.netapp.com"
                target="_blank" title="blog" alt="blog">
                <span class="n-footer__social-link-text">blog</span>
                <svg class="n-icon-blog n-footer__social-link-icon" aria-labelledby="title">
                  <title>blog@</title>
                  <use xmlns:xlink="http://www.w3.org/1999/xlink"
                    xlink:href="/us-en/astra-data-store/common/svg/sprite.svg#blog"></use>
                </svg>
              </a>
            </li>
            <li class="n-footer__social-link-list-item">
              <a class="n-footer__social-link" data-ntap-social="follow-community" href="https://community.netapp.com/"
                target="_blank" title="community" alt="community">
                <span class="n-footer__social-link-text">community</span>
                <svg class="n-icon-community n-footer__social-link-icon" aria-labelledby="title">
                  <title>community@</title>
                  <use xmlns:xlink="http://www.w3.org/1999/xlink"
                    xlink:href="/us-en/astra-data-store/common/svg/sprite.svg#comments"></use>
                </svg>
              </a>
            </li>
            <li class="n-footer__social-link-list-item">
              <a class="n-footer__social-link" data-ntap-social="follow-twitter" href="https://twitter.com/netapp"
                target="_blank" title="twitter" alt="twitter">
                <span class="n-footer__social-link-text">twitter</span>
                <svg class="n-icon-twitter n-footer__social-link-icon" aria-labelledby="title">
                  <title>twitter@</title>
                  <use xmlns:xlink="http://www.w3.org/1999/xlink"
                    xlink:href="/us-en/astra-data-store/common/svg/sprite.svg#twitter"></use>
                </svg>
              </a>
            </li>
            <li class="n-footer__social-link-list-item">
              <a class="n-footer__social-link" data-ntap-social="follow-facebook" href="https://www.facebook.com/NetApp"
                target="_blank" title="facebook" alt="facebook">
                <span class="n-footer__social-link-text">facebook</span>
                <svg class="n-icon-facebook n-footer__social-link-icon" aria-labelledby="title">
                  <title>facebook@</title>
                  <use xmlns:xlink="http://www.w3.org/1999/xlink"
                    xlink:href="/us-en/astra-data-store/common/svg/sprite.svg#facebook"></use>
                </svg>
              </a>
            </li>
            <li class="n-footer__social-link-list-item">
              <a class="n-footer__social-link" data-ntap-social="follow-linkedin"
                href="https://www.linkedin.com/company/netapp" target="_blank" title="linkedin" alt="linkedin">
                <span class="n-footer__social-link-text">linkedin</span>
                <svg class="n-icon-linkedin n-footer__social-link-icon" aria-labelledby="title">
                  <title>linkedin@</title>
                  <use xmlns:xlink="http://www.w3.org/1999/xlink"
                    xlink:href="/us-en/astra-data-store/common/svg/sprite.svg#linkedin"></use>
                </svg>
              </a>
            </li>
            <li class="n-footer__social-link-list-item">
              <a class="n-footer__social-link" data-ntap-social="follow-youtube"
                href="https://www.youtube.com/user/NetAppTV" target="_blank" title="youtube" alt="youtube">
                <span class="n-footer__social-link-text">youtube</span>
                <svg class="n-icon-youtube n-footer__social-link-icon" aria-labelledby="title">
                  <title>youtube@</title>
                  <use xmlns:xlink="http://www.w3.org/1999/xlink"
                    xlink:href="/us-en/astra-data-store/common/svg/sprite.svg#youtube"></use>
                </svg>
              </a>
            </li>
            <li class="n-footer__social-link-list-item">
              <a class="n-footer__social-link" data-ntap-social="follow-slideshare"
                href="https://www.slideshare.net/NetApp" target="_blank" title="slideshare" alt="slideshare">
                <span class="n-footer__social-link-text">slideshare</span>
                <svg class="n-icon-slideshare n-footer__social-link-icon" aria-labelledby="title">
                  <title>slideshare@</title>
                  <use xmlns:xlink="http://www.w3.org/1999/xlink"
                    xlink:href="/us-en/astra-data-store/common/svg/sprite.svg#slideshare"></use>
                </svg>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</footer>

      </div><!-- Elasticsearch JS -->
      <script type="text/javascript" src='/us-en/astra-data-store/js/bundle.js'></script>

      <!-- Syntax Highlighting -->
      <script type="text/javascript" src='/us-en/astra-data-store/js/prism.js'></script>
      <script type="text/javascript" src='/us-en/astra-data-store/js/prism-curl.js'></script>
    </div>
    <script>
      document.body.offsetWidth=1903;
      cookieLaw = {}
      cookieLaw.euCountry = "US";
      cookieLaw.invoke = function(){return false;}
    </script>
    <script src='/us-en/astra-data-store/js/www-ntap.js'></script>
    <script src='/us-en/astra-data-store/js/tabbed-blocks.js'></script>
  </body></html>
